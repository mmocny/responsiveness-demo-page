<style>

.stutterer {
  transform: scale(1.5);
  height: 310px;
  width: 310px;
  position: absolute;
  left: 0;
  right: 0;
  top: -256px;
  bottom: 0;
  margin: auto;
  box-shadow: 0 0 10px 10px rgba(0, 0, 0, 0.2);
  border-radius: 200px;
}

.clockHand {
  stroke: white;
  stroke-width: 10px;
  stroke-linecap: round;
}

.clockFace {
  stroke: white;
  stroke-width: 10px;
}

.arcHand {
}

.innerLine {
  border-radius: 6px;
  position: absolute;
  height: 149px;
  left: 47.5%;
  top: 0%;
  width: 5%;
  background-color: red;
  transform-origin: bottom center;
}

</style>

<div class="stutterer">
	<svg height="310" width="310">
		<circle
			class="clockFace"
			cx=155
			cy=155
			r=150
		/>
		<g>
			<path className="arcHand" />
			<path className="arcHand" />
			<path className="arcHand" />
			<path className="arcHand" />
			<path className="arcHand" />
			<path className="arcHand" />
			<path className="arcHand" />
			<path className="arcHand" />
			<path className="arcHand" />
			<path className="arcHand" />
		</g>
		<path class="clockHand" />
	</svg>
</div>

<script type="module">

const SPEED = 0.003 / Math.PI;
const FRAMES = 10;

const faceRef = document.querySelector('svg > circle');
const arcGroupRef = document.querySelector('svg > g');
const clockHandRef = document.querySelector('svg > path');

function svgToCanvas(svg, ctx) {
	function copySvgToCanvas(svg, canvas) {
	const { width, height } = svg.getBBox(); 
	const blob = new Blob([svg.outerHTML],{type:'image/svg+xml;charset=utf-8'});
	const blobURL = URL.createObjectURL(blob);
	const image = new Image();
	image.onload = () => {
		canvas.widht = width;
		canvas.height = height;
		canvas.getContext('2d').drawImage(image, 0, 0, width, height );
	};
	image.src = blobURL;

}	ctx.drawImage(img, 0, 0, width, height);
}

let frame = null;
let hitCounter = 0;
let rotation = 0;
let t0 = Date.now();
let arcs = [];

function animate() {
    const now = Date.now();
    const td = now - t0;
    rotation = (rotation + SPEED * td) % (2 * Math.PI);
    t0 = now;

    arcs.push({rotation: rotation, td});

    let lx, ly, tx, ty;
    if (arcs.length > FRAMES) {
      arcs.forEach(({rotation, td}, i) => {
        lx = tx;
        ly = ty;
        const r = 145;
        tx = 155 + r * Math.cos(rotation);
        ty = 155 + r * Math.sin(rotation);
        const bigArc = SPEED * td < Math.PI ? '0' : '1';
        const path = `M${tx} ${ty}A${r} ${r} 0 ${bigArc} 0 ${lx} ${ly}L155 155`;
        const hue = 120 - Math.min(120, td / 4);
        const colour = `hsl(${hue}, 100%, ${60 - i * (30 / FRAMES)}%)`;
        if (i !== 0) {
          const arcEl = arcGroupRef.children[i - 1];
          arcEl.setAttribute('d', path);
          arcEl.setAttribute('fill', colour);
        }
      });
      clockHandRef.setAttribute('d', `M155 155L${tx} ${ty}`);
      arcs.shift();
    }

    if (hitCounter > 0) {
      faceRef.setAttribute(
        'fill',
        `hsla(0, 0%, ${hitCounter}%, 0.95)`
      );
      hitCounter -= 1;
    } else {
      hitCounter = 0;
      faceRef.setAttribute('fill', 'hsla(0, 0%, 5%, 0.95)');
    }

    frame = requestAnimationFrame(animate);
};

function start() {
	frame = requestAnimationFrame(animate);
}

start();
</script>